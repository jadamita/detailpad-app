(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{84785:function(e,s,r){"use strict";r.d(s,{Z:function(){return a}});var a=(0,r(30853).Z)("lock","IconLock",[["path",{d:"M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z",key:"svg-0"}],["path",{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-4a4 4 0 1 1 8 0v4",key:"svg-2"}]])},54035:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/activate",function(){return r(490)}])},26959:function(e,s,r){"use strict";r.d(s,{Z:function(){return n}});var a=r(85893),t=r(43523),o=r(72445);function n(e){let{children:s}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(t.M,{sx:e=>({minHeight:"100vh",background:"dark"===e.colorScheme?e.colors.dark[8]:e.colors.gray[0]}),children:(0,a.jsx)(o.W,{size:"xs",sx:{width:480,paddingBottom:16},children:s})})})}},490:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return j}});var a=r(85893),t=r(19236),o=r(74403),n=r(82623),i=r(49737),l=r(80061),c=r(73193),u=r(67841),d=r(87583),h=r(11163),m=r(67294),f=r(3600),p=(0,r(30853).Z)("mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),g=r(84785),v=r(26959),w=r(34542);let x=()=>{let e=(0,h.useRouter)(),[s,r]=(0,m.useState)(!0),[v,x]=(0,m.useState)(""),j=e.query.hash,b=w.h.user.activateUser.useMutation({onSuccess:()=>{console.log("success"),r(!1)},onError:()=>{console.log("error"),r(!1),x("error activating user")}}),{data:y,isLoading:k}=w.h.user.getUnactivatedUser.useQuery({hash:j}),P=(0,d.c)({initialValues:{email:"",password:"",confirmPassword:""},validate:{email:e=>/^\S+@\S+$/.test(e)?null:"Invalid email",password:e=>e.length<6?"Password must be at least 6 characters":null,confirmPassword:(e,s)=>e!==s.password?"Passwords do not match":null}});(0,m.useEffect)(()=>{x(""),r(!0),y?(P.setFieldValue("email",y.email),console.log("user",y),r(!1)):(console.log("user not found"),r(!1),k||x("Unable to find user"))},[k,y,P]);let _=async e=>{r(!0),x(""),console.log(e),await b.mutateAsync({hash:j,password:e.password})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.D,{align:"center",sx:e=>({fontFamily:"Greycliff CF, ".concat(e.fontFamily||""),fontWeight:900}),children:"Activate your Account"}),(0,a.jsx)("br",{}),v&&(0,a.jsx)(o.b,{icon:(0,a.jsx)(f.Z,{size:"1rem"}),title:"Error!",color:"red",children:v}),(0,a.jsxs)(n.X,{withBorder:!0,shadow:"md",p:30,mt:30,radius:"md",children:[(0,a.jsx)(i.f,{visible:s,overlayBlur:2}),(0,a.jsxs)("form",{onSubmit:P.onSubmit(async e=>await _(e)),children:[(0,a.jsx)(l.o,{label:"Email",placeholder:"Email",disabled:!0,icon:(0,a.jsx)(p,{size:"1rem"}),...P.getInputProps("email")}),(0,a.jsx)(c.W,{label:"Password",placeholder:"Your password",required:!0,mt:"md",disabled:null==y,icon:(0,a.jsx)(g.Z,{size:"1rem"}),...P.getInputProps("password")}),(0,a.jsx)(c.W,{label:"Confirm Password",placeholder:"Confirm password",required:!0,mt:"md",disabled:null==y,icon:(0,a.jsx)(g.Z,{size:"1rem"}),...P.getInputProps("confirmPassword")}),(0,a.jsx)(u.z,{type:"submit",fullWidth:!0,mt:"xl",disabled:null==y,children:"Activate Account"})]})]})]})};x.getLayout=function(e){return(0,a.jsx)(v.Z,{children:e})};var j=x}},function(e){e.O(0,[659,734,90,774,888,179],function(){return e(e.s=54035)}),_N_E=e.O()}]);