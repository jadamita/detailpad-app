(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{12115:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/team",function(){return s(85371)}])},47061:function(e,r,s){"use strict";s.d(r,{Z:function(){return M}});var t=s(85893),n=s(64761),i=s(98664),a=s(38561),l=s(66137),o=s(18540),d=s(81310),c=s(19236),h=s(90344),u=s(67294),x=s(37068);let m=e=>{let{children:r}=e;return(0,t.jsx)(x.SV,{FallbackComponent:j,children:r})},j=e=>{let{error:r}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"Something went wrong:"}),r.message]})};var p=s(34736),g=s(5044),v=s(95117),f=s(33765),k=s(70385),w=s(72678),b=s(8861),S=s(21294),y=s(15710),C=s(33299),N=s(11163);let z=e=>{let{icon:r,color:s,label:n,path:i,setOpened:a}=e,o=(0,N.useRouter)();return(0,t.jsx)(p.k,{sx:e=>({display:"block",width:"100%",padding:e.spacing.xs,borderRadius:e.radius.sm,backgroundColor:i==o.pathname?"dark"===e.colorScheme?e.colors.dark:e.colors.blue[1]:e.colors.white,color:"dark"===e.colorScheme?e.colors.dark[0]:e.black,"&:hover":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[2]}}),onClick:()=>{o.push(i),a(!1)},children:(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(g.k,{color:s,variant:"light",size:"lg",children:r}),(0,t.jsx)(v.x,{size:"sm",children:n})]})})},A=e=>{let r=[{icon:(0,t.jsx)(w.Z,{size:"1rem"}),color:"blue",label:"Dashboard",path:"/",sortOrder:0},{icon:(0,t.jsx)(b.Z,{size:"1rem"}),color:"green",label:"Account",path:"/account",sortOrder:3},{icon:(0,t.jsx)(S.Z,{size:"1rem"}),color:"orange",label:"Services",path:"/services",sortOrder:3}];return e.role==k.UserRole.MANAGER&&r.push({icon:(0,t.jsx)(y.Z,{size:"1rem"}),color:"grape",label:"Team",path:"/team",sortOrder:2}),r.sort((e,r)=>e.sortOrder>r.sortOrder?1:-1)};function I(e){let{opened:r,setOpened:s}=e,n=(0,C.useSession)();if("authenticated"!=n.status)return(0,t.jsx)(f.w,{p:"md",hiddenBreakpoint:"sm",hidden:!r,width:{sm:200,lg:300},children:(0,t.jsx)(f.w.Section,{grow:!0,mt:"md",children:(0,t.jsx)("div",{children:"Loading..."})})});let i=A(n.data.user).map(e=>(0,u.createElement)(z,{...e,key:e.label,setOpened:s}));return(0,t.jsx)(f.w,{p:"md",hiddenBreakpoint:"sm",hidden:!r,width:{sm:200,lg:300},children:(0,t.jsx)(f.w.Section,{grow:!0,mt:"md",children:(0,t.jsx)("div",{children:i})})})}var _=s(68104),D=s(49834),E=s(99985),O=s(33111),P=s(2013),Z=s(17339),T=s(79153),U=s(40221),F=s(82876);function L(){let{data:e}=(0,C.useSession)();return(0,t.jsxs)(_.v,{shadow:"md",width:200,withArrow:!0,children:[(0,t.jsx)(_.v.Target,{children:(0,t.jsx)(D.A,{variant:"hover",radius:"xl",size:40,children:(0,t.jsx)(E.q,{src:"".concat("https://qamedia.detailpad.com","/avatars/").concat((null==e?void 0:e.user.avatar)!=null?null==e?void 0:e.user.avatar:"default_ava.jpg"),radius:"xl"})})}),(0,t.jsxs)(_.v.Dropdown,{children:[(0,t.jsx)(_.v.Label,{children:"Application"}),(0,t.jsx)(_.v.Item,{icon:(0,t.jsx)(O.Z,{size:14}),children:"Settings"}),(0,t.jsx)(_.v.Item,{icon:(0,t.jsx)(P.Z,{size:14}),children:"Messages"}),(0,t.jsx)(_.v.Item,{icon:(0,t.jsx)(Z.Z,{size:14}),children:"Gallery"}),(0,t.jsx)(_.v.Item,{icon:(0,t.jsx)(T.Z,{size:14}),rightSection:(0,t.jsx)(v.x,{size:"xs",color:"dimmed",children:"âŒ˜K"}),children:"Search"}),(0,t.jsx)(_.v.Divider,{}),(0,t.jsx)(_.v.Label,{children:"Danger zone"}),(0,t.jsx)(_.v.Item,{icon:(0,t.jsx)(U.Z,{size:14}),children:"Transfer my data"}),(0,t.jsx)(_.v.Item,{color:"red",icon:(0,t.jsx)(F.Z,{size:14}),onClick:()=>(0,C.signOut)(),children:"Logout"})]})]})}function M(e){let{children:r}=e,s=(0,n.rZ)(),[x,j]=(0,u.useState)(!1);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.V,{padding:"md",navbarOffsetBreakpoint:"sm",asideOffsetBreakpoint:"sm",styles:e=>({main:{backgroundColor:"dark"===e.colorScheme?e.colors.dark[8]:e.colors.gray[0]}}),navbar:(0,t.jsx)(I,{opened:x,setOpened:j}),header:(0,t.jsx)(a.h,{height:70,p:"md",children:(0,t.jsxs)(l.Z,{position:"apart",noWrap:!0,children:[(0,t.jsx)(o.z,{largerThan:"sm",styles:{display:"none"},children:(0,t.jsx)(d.O,{style:{justifyContent:"start"},opened:x,onClick:()=>j(e=>!e),size:"sm",color:s.colors.gray[6],mr:"xl"})}),(0,t.jsx)(o.z,{smallerThan:"sm",styles:{display:"none"},children:(0,t.jsx)(c.D,{children:"App"})}),(0,t.jsx)(L,{})]})}),footer:(0,t.jsx)(h.$,{height:60,p:"md",children:"Detailpad Footer"}),children:(0,t.jsx)(m,{children:r})})})}},85371:function(e,r,s){"use strict";s.r(r),s.d(r,{__N_SSP:function(){return N},default:function(){return z}});var t=s(85893),n=s(9008),i=s.n(n),a=s(17789),l=s(66137),o=s(99985),d=s(95117),c=s(82623),h=s(54777),u=s(67841),x=s(73723),m=s(95078),j=s(47061),p=s(91759),g=s(64761),v=s(98538),f=s(20050),k=s(80061),w=s(87583),b=s(34542),S=function(e){let{isOpen:r,closeModal:s}=e,n=(0,g.rZ)(),i=b.h.user.addUser.useMutation(),{refetch:a}=b.h.user.getUsers.useQuery(),l=(0,w.c)({initialValues:{username:"",email:"",firstName:"",lastName:""},validate:{firstName:e=>e.length<1?"Please enter a first name":null,lastName:e=>e.length<1?"Please enter a last name":null,username:e=>e.length<3?"Name must have at least 3 letters":null,email:e=>/^\S+@\S+$/.test(e)?null:"Please enter a valid email"}}),o=async e=>{console.log(e);let r=await i.mutateAsync(e);console.log(r),l.reset(),await a(),s()};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(v.u,{opened:r,onClose:()=>{l.reset(),s()},title:"Add New User",transitionProps:{transition:"fade",duration:200},overlayProps:{color:"dark"===n.colorScheme?n.colors.dark[9]:n.colors.gray[2],opacity:.55,blur:3},children:(0,t.jsx)("form",{onSubmit:l.onSubmit(e=>o(e)),children:(0,t.jsxs)(f.r,{children:[(0,t.jsx)(f.r.Col,{span:6,children:(0,t.jsx)(k.o,{withAsterisk:!0,label:"First Name",placeholder:"First Name",...l.getInputProps("firstName")})}),(0,t.jsx)(f.r.Col,{span:6,children:(0,t.jsx)(k.o,{withAsterisk:!0,label:"Last Name",placeholder:"Last Name",...l.getInputProps("lastName")})}),(0,t.jsx)(f.r.Col,{children:(0,t.jsx)(k.o,{withAsterisk:!0,label:"Username",placeholder:"Desired Username",...l.getInputProps("username")})}),(0,t.jsx)(f.r.Col,{children:(0,t.jsx)(k.o,{withAsterisk:!0,label:"Email",placeholder:"your@email.com",...l.getInputProps("email")})}),(0,t.jsx)(f.r.Col,{children:(0,t.jsx)(u.z,{type:"submit",children:"Add User"})})]})})})})},y=s(70385);let C=()=>{let{data:e}=b.h.user.getUsers.useQuery(),r=e=>{switch(e){case y.UserStatus.ACTIVATED:return(0,t.jsx)(a.C,{children:"Activated"});case y.UserStatus.CLOSED:return(0,t.jsx)(a.C,{children:"Closed"});case y.UserStatus.DELETED:return(0,t.jsx)(a.C,{children:"Deleted"});case y.UserStatus.DISABLED:return(0,t.jsx)(a.C,{children:"Disabled"});case y.UserStatus.PENDING_VERIFICATION:return(0,t.jsx)(a.C,{children:"Pending Verification"});case y.UserStatus.PENDING_ACTIVATION:return(0,t.jsx)(a.C,{children:"Pending Activation"});default:return(0,t.jsx)(a.C,{children:"Unknown"})}},s=null==e?void 0:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(l.Z,{spacing:"sm",children:[(0,t.jsx)(o.q,{size:70,src:"".concat("https://qamedia.detailpad.com","/avatars/").concat(null!=e.avatar?e.avatar:"default_ava.jpg"),radius:40}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.x,{fz:"sm",fw:500,children:e.name}),(0,t.jsx)(d.x,{fz:"xs",c:"dimmed",children:e.email})]})]})}),(0,t.jsx)("td",{children:e.role}),(0,t.jsxs)("td",{children:[Math.floor(6*Math.random()+5)," days ago"]}),(0,t.jsx)("td",{children:r(e.status)})]},e.id)),[n,{open:j,close:g}]=(0,p.q)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S,{isOpen:n,closeModal:g}),(0,t.jsxs)(i(),{children:[(0,t.jsx)("title",{children:"DetailPad - Team"}),(0,t.jsx)("meta",{name:"description",content:"Generated by create-t3-app"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsx)("div",{children:(0,t.jsxs)(c.X,{withBorder:!0,shadow:"md",p:20,radius:"md",children:[(0,t.jsx)(d.x,{sx:e=>({fontFamily:"Greycliff CF, ".concat(e.fontFamily||""),fontWeight:500,fontSize:24}),children:"Team"}),(0,t.jsx)(h.i,{my:"sm",pb:5}),(0,t.jsx)(u.z,{onClick:j,children:"Add Employee"}),(0,t.jsx)(x.x,{children:(0,t.jsxs)(m.i,{miw:800,verticalSpacing:"sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Team Member"}),(0,t.jsx)("th",{children:"Role"}),(0,t.jsx)("th",{children:"Last Active"}),(0,t.jsx)("th",{children:"Status"})]})}),(0,t.jsx)("tbody",{children:s})]})})]})})]})};C.getLayout=function(e){return(0,t.jsx)(j.Z,{children:e})};var N=!0,z=C}},function(e){e.O(0,[659,734,536,265,352,774,888,179],function(){return e(e.s=12115)}),_N_E=e.O()}]);